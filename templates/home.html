<!DOCTYPE HTML>
<html>
<head>
    <title>Home Page</title>
    <link rel="stylesheet" href="/static/styles1.css"/>
</head>

<body>
    <!-- Background Image -->
    <div class="background"></div>

    <!-- Top-right Admin Button -->
    <div class="top-right">
        <button onclick="location.href='{{url_for('admin_login')}}'">Admin</button>
    </div>

    <!-- Main Content -->
    <div class="content">
        <label for="req_btn">Animal Sighting in your locality?</label>
        <button class="request-survey" id="req_btn" onclick="location.href='{{url_for('request_page')}}'">Request a Survey!</button>

        <div class="center">
            <div class="homepage-search">
                <h1>Indian Wildlife Database</h1>
                <form method="GET" action="{{ url_for('home') }}">
                    <label for="location-search">Search for a Location: </label>
                    <input type="search" id="location-search" name="query" placeholder="Search for a Location (Ex: Tamil Nadu)" pattern="^[a-zA-Z\s]+$" value="{{ request.args.get('query', '') }}" />
                    <button type="submit">Search</button><br>
                </form>
            </div>

            <!-- Search Results Section -->
            <div class="search-results">
                {% if results %}
                    <h3>Search Results "{{ query }}"</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Animal Name</th>
                                <th>District</th>
                                <th>State</th>
                                <th>Animal Count</th>
                                <th>Survey Date</th>
                                <th>Surveyor Name</th>
                                <th>Method of Survey</th>
                                <th>Status</th>
                                <th>Report</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for result in results %}
                                <tr>
                                    <td>{{ result.animal_name }}</td>
                                    <td>{{ result.place }}</td>
                                    <td>{{ result.location }}</td>
                                    <td>{{ result.animal_count }}</td>
                                    <td>{{ result.survey_date }}</td>
                                    <td>{{ result.surveyor_name }}</td>
                                    <td>{{ result.method }}</td>
                                    <td>{{ result.status }}</td>
                                    <td><a href="{{ url_for('view_report', survey_id=result.survey_id) }}">View Report</a></td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% elif query %}
                    <p>No results found for "{{ query }}".</p>
                {% endif %}
            </div>

            <!-- Flash Messages -->
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class="flash-messages">
        {% for message in messages %}
            <div class="flash-message">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

        </div>
    </div>
</body>
</html>
